<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/layout :: head('Calendario de Actividades')"></head>
<body>
<header th:replace="fragments/layout :: header(${username})"></header>

<div class="container-fluid calendar-page">
    <div th:replace="fragments/layout :: messages"></div>

    <div class="card shadow-sm">
        <div class="card-body">
            <h2 class="card-title mb-4">Calendario de Actividades</h2>

            <!-- Filtros -->
            <div class="mb-4 filter-section">
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="mostrarTareas" checked>
                    <label class="form-check-label" for="mostrarTareas">
                        <span class="badge bg-primary">Tareas</span>
                    </label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="mostrarProyectos" checked>
                    <label class="form-check-label" for="mostrarProyectos">
                        <span class="badge bg-success">Proyectos</span>
                    </label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="mostrarReuniones" checked>
                    <label class="form-check-label" for="mostrarReuniones">
                        <span class="badge badge-reunion">Reuniones</span>
                    </label>
                </div>
            </div>

            <!-- Contenedor del calendario -->
            <div id="calendario" class="calendar-container"></div>

            <!-- Botón Volver -->
            <div class="mt-4 ms-2 text-start">
                <a href="/dashboard" class="btn btn-primary btn-back">
                    <i class="fas fa-arrow-left me-2"></i>Volver al Dashboard
                </a>
            </div>
        </div>
    </div>
</div>

<!-- FullCalendar -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/locales/es.js"></script>

<!-- Archivos específicos -->
<link th:href="@{/css/calendario-styles.css}" rel="stylesheet">
<script th:src="@{/scripts/calendario.js}"></script>

<!-- Datos del servidor -->
<script th:inline="javascript">
    window.calendarioData = {
        tareas: /*[[${tareas}]]*/ [],
        proyectos: /*[[${proyectos}]]*/ [],
        reuniones: /*[[${reuniones}]]*/ []
    };
</script>
</body>
</html>
